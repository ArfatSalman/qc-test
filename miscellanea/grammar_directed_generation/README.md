The experiment with Grammarinator is based on the developement branch, which is different from that available on PyPI.

In particular the last commit of Grammarinator used was: `583ebca242b7f2d181b1151a9128fc178f00c4d3`.

## STEP 0 - Getting Started
Clone the following repos in this folder:
1. Grammarinator: https://github.com/renatahodovan/grammarinator (commit: `583ebca242b7f2d181b1151a9128fc178f00c4d3`)
2. Grammar of QASM 2.0 : https://github.com/libtangle/QASM-Grammar (commit: `15019d8de68e4add9228b90dc4f48b7fbcd3daf1`)


Then we need to create two subfolder:
- `fuzzer`: contains the main py file used by our grammarinator command line. Note that they are grammar specific.
- `tests`: contains the tests generated by our grammarinator.

## STEP 1 - Generate the generator for my grammar

To generate the fuzzer files, run the following command from the main folder:
```bash
grammarinator-process ./QASM-Grammar/QASM.g4 -o fuzzer --no-actions
```

## STEP 2 - Fuzz programs in my language

To generate new tests, use this command:
```bash
grammarinator-generate QASMGenerator.QASMGenerator -r mainprog -d 40 -o ./tests/test_%d.qasm -n 100 -s grammarinator.runtime.simple_space_serializer --sys-path ./fuzzer -j 10
```


Tweeks:
To make the qasm file look nice, I edit the file `QASMGenerator.py` I manually replaced all the occurrences of `;` with `;\n` to make sure we have one line for each instruction.